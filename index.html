<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kurzy-check: Pr√©miov√Ω Investiƒçn√Ω Dashboard</title>
    <!-- Naƒç√≠tanie Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Naƒç√≠tanie Chart.js pre vizualiz√°ciu -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Naƒç√≠tanie Lucide Icons pre modern√© ikony (SVG) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        // Konfigur√°cia Tailwind CSS pre modern√Ω tmav√Ω dizajn
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-main': '#0f172a', // Slate-900
                        'card-bg': '#1e293b', // Slate-800 - Hlavn√© pozadie kariet
                        'card-hover': '#334155', // Slate-700 - Hover efekt
                        'accent-primary': '#3b82f6', // Blue-500 - Pre navig√°ciu/hlavn√Ω fokus
                        'up-green': '#10b981', // Emerald-500 - Zelen√° pre rast
                        'down-red': '#ef4444', // Red-500 - ƒåerven√° pre pokles
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- Vlastn√Ω CSS pre prvky, ktor√© nem√¥≈æe pokry≈• Tailwind -->
    <style>
        /* Z√°kladn√Ω ≈°t√Ωl pre body a font */
        body {
            background-color: #0f172a;
            color: #e2e8f0; /* Svetlej≈°√≠ text pre tmav√© pozadie */
            font-family: 'Inter', sans-serif;
        }

        /* Vylep≈°en√Ω ≈°t√Ωl pre z√°lo≈æky (navig√°cia) */
        .tab-button {
            display: inline-block;
            padding: 0.75rem 1.25rem;
            font-weight: 500;
            font-size: 0.875rem;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            color: #94a3b8; /* text-slate-400 */
            white-space: nowrap;
            cursor: pointer;
        }
        .tab-button:hover {
            color: #f1f5f9; /* text-slate-100 */
        }
        .tab-button.active {
            color: #3b82f6; /* accent-primary */
            border-color: #3b82f6; /* accent-primary */
        }
        
        /* ≈†t√Ωl pre tabuƒæky a riadky */
        .data-row {
            transition: background-color 0.15s;
            cursor: pointer;
        }
        .data-row:hover {
            background-color: rgba(51, 65, 85, 0.5); /* card-hover/50 */
        }

        /* Anim√°cia pre zmenu ceny */
        @keyframes flashGreen {
            0% { color: #10b981; }
            100% { color: inherit; }
        }
        @keyframes flashRed {
            0% { color: #ef4444; }
            100% { color: inherit; }
        }
        .flash-up { animation: flashGreen 1s ease-out; }
        .flash-down { animation: flashRed 1s ease-out; }

        /* Kontajner pre tabulku s gradientom pre lep≈°iu viditeƒænos≈• scrollu na mobile */
        .table-container {
            position: relative;
        }

        /* Naƒç√≠tavac√≠ indik√°tor */
        .loader {
            border: 3px solid #1e293b;
            border-radius: 50%;
            border-top: 3px solid #3b82f6;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

    </style>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <!-- Hlavn√Ω kontajner aplik√°cie -->
    <div id="app" class="max-w-7xl mx-auto">
        
        <!-- TOP NAVIG√ÅCIA (Domov / O n√°s) -->
        <header class="flex justify-between items-center mb-6 border-b border-card-hover pb-4">
            <h1 class="text-3xl font-extrabold text-accent-primary tracking-tight flex items-center">
                Kurzy-check
                <span id="live-indicator" class="ml-3 text-xs font-mono bg-card-hover text-up-green px-2 py-1 rounded hidden items-center">
                    <span class="w-2 h-2 bg-up-green rounded-full mr-2 animate-pulse"></span> LIVE
                </span>
            </h1>
            <nav>
                <button onclick="navigate('home')" id="nav-home" class="px-3 py-1 text-sm font-semibold rounded-lg transition duration-200 bg-accent-primary text-white shadow-lg shadow-accent-primary/30 mr-2">
                    Domov
                </button>
                <button onclick="navigate('about')" id="nav-about" class="px-3 py-1 text-sm font-semibold rounded-lg transition duration-200 text-slate-300 hover:bg-card-hover">
                    O n√°s
                </button>
            </nav>
        </header>

        <!-- Obsah (VIEWS) - Zobrazen√Ω len pri 'Domov' -->
        <div id="main-content">
            <!-- Sekcia pre z√°lo≈æky (Krypto, Akcie, Komodity, atƒè.) -->
            <nav class="mb-8 overflow-x-auto">
                <div class="flex border-b border-card-hover" id="main-tabs">
                    <button onclick="showView('dashboard')" class="tab-button active" data-view="dashboard">Dashboard</button>
                    <button onclick="showView('crypto')" class="tab-button" data-view="crypto">Kryptomeny (Real)</button>
                    <button onclick="showView('forex')" class="tab-button" data-view="forex">Kurzy Mien (Real)</button>
                </div>
                <div class="text-sm text-yellow-500 mt-2 p-2 bg-card-hover rounded-lg">
                    <i data-lucide="alert-triangle" class="inline w-4 h-4 mr-1"></i>
                    **D√¥le≈æit√©:** Pre Akcie a Komodity nie s√∫ dostupn√© bezplatn√©, real-time API. Zobrazujeme len d√°ta z dostupn√Ωch Live zdrojov (Krypto, Forex).
                </div>
            </nav>

            <div id="views">
                <!-- 1. DASHBOARD VIEW -->
                <div id="dashboard" class="view-content">
                    <h2 class="text-3xl font-bold mb-6 text-slate-100 flex items-center">
                        Aktu√°lne Live D√°ta
                        <span id="loading-spinner" class="loader ml-4 opacity-0"></span>
                    </h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <!-- Karta 1: Bitcoin (Live) -->
                        <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover transition duration-300 hover:scale-[1.02]">
                            <p class="text-sm text-slate-400">Bitcoin (Live)</p>
                            <p class="text-3xl font-bold mt-2 text-white" id="dash-btc-price">Naƒç√≠tavam...</p>
                            <span class="text-slate-400 text-sm flex items-center mt-3 font-semibold" id="dash-btc-change">
                                --% (24h)
                            </span>
                        </div>
                        <!-- Karta 2: Ethereum (Live) -->
                        <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover transition duration-300 hover:scale-[1.02]">
                            <p class="text-sm text-slate-400">Ethereum (Live)</p>
                            <p class="text-3xl font-bold mt-2 text-white" id="dash-eth-price">Naƒç√≠tavam...</p>
                            <span class="text-slate-400 text-sm flex items-center mt-3 font-semibold" id="dash-eth-change">
                                --% (24h)
                            </span>
                        </div>
                        <!-- Karta 3: EUR/USD (Live) -->
                        <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover transition duration-300 hover:scale-[1.02]">
                            <p class="text-sm text-slate-400">Euro / USD (Live)</p>
                            <p class="text-3xl font-bold mt-2 text-white" id="dash-eurusd-price">Naƒç√≠tavam...</p>
                            <span class="text-slate-400 text-sm flex items-center mt-3 font-semibold" id="dash-eurusd-change">
                                Live Rate
                            </span>
                        </div>
                        <!-- Karta 4: Informaƒçn√° karta -->
                        <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover transition duration-300 hover:scale-[1.02]">
                            <p class="text-sm text-slate-400">D√°tov√© Zdroj</p>
                            <p class="text-3xl font-bold mt-2 text-white">100% Real</p>
                            <span class="text-slate-400 text-sm flex items-center mt-3 font-semibold">
                                Bez Simul√°cie
                            </span>
                        </div>
                    </div>

                    <!-- Graf -->
                    <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover">
                        <h3 class="text-xl font-semibold mb-4 text-slate-200">V√Ωvoj BTC Ceny (Live Data)</h3>
                        <div class="h-80">
                            <canvas id="btcChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- 2. KRYPTOMENY VIEW -->
                <div id="crypto" class="view-content hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-200">Top Kryptomeny (Live z CoinGecko)</h2>
                    <div class="bg-card-bg p-4 rounded-2xl shadow-xl border border-card-hover table-container overflow-x-auto">
                        <table class="min-w-full divide-y divide-card-hover">
                            <thead>
                                <tr class="text-left text-slate-400">
                                    <th class="py-3 px-4 font-semibold">#</th>
                                    <th class="py-3 px-4 font-semibold">Mena</th>
                                    <th class="py-3 px-4 font-semibold">Cena (USD)</th>
                                    <th class="py-3 px-4 font-semibold">24h Zmena</th>
                                    <th class="py-3 px-4 font-semibold hidden sm:table-cell">Kapitaliz√°cia</th>
                                </tr>
                            </thead>
                            <tbody id="crypto-list" class="divide-y divide-card-hover">
                                <!-- D√°ta sa vlo≈æia cez JS -->
                            </tbody>
                        </table>
                        <div id="crypto-status" class="py-4 text-center text-slate-400">Naƒç√≠tavam d√°ta...</div>
                    </div>
                </div>

                <!-- 3. MENY VIEW (Forex) -->
                <div id="forex" class="view-content hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-200">Kurzy Mien (Live z API)</h2>
                    <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover">
                        <!-- Grid bol navrhnut√Ω pre 4 stƒ∫pce na veƒækom, ƒço je ide√°lne pre 6 mien -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="forex-list">
                            <!-- D√°ta sa vlo≈æia cez JS -->
                        </div>
                        <div id="forex-status" class="py-4 text-center text-slate-400">Naƒç√≠tavam d√°ta...</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- O N√ÅS VIEW -->
        <div id="about" class="hidden">
            <h2 class="text-3xl font-bold mb-6 text-slate-100 border-b border-card-hover pb-2">O n√°s</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mt-8">
                <div class="space-y-6">
                    <div class="p-6 bg-card-bg rounded-2xl shadow-xl border border-card-hover">
                        <h3 class="text-xl font-semibold text-accent-primary mb-3">Ako to funguje?</h3>
                        <p class="text-slate-300">
                            T√°to aplik√°cia vyu≈æ√≠va len <strong>re√°lne, bezplatn√©, verejn√© API</strong> pre Kryptomeny (CoinGecko) a Kurzy Mien (ExchangeRate-API). 
                            Preto neobsahuje sekcie Akci√≠ a Komod√≠t, pre ktor√© nie s√∫ dostupn√© spoƒæahliv√© real-time API bez poplatku. V≈°etky zobrazen√© d√°ta s√∫ stiahnut√© priamo z internetu.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Logika -->
    <script>
        // Funkcia na generovanie ikony
        const getIcon = (symbol) => {
            switch (symbol) {
                case 'BTC': return '‚Çø';
                case 'ETH': return 'Œû';
                case 'XRP': return '‚úñÔ∏è';
                case 'SOL': return 'üîÜ';
                case 'ADA': return '‚Ç≥';
                case 'DOGE': return 'üêï';
                case 'BNB': return 'üî∏';
                case 'LTC': return '‚õèÔ∏è';
                case 'SHIB': return 'üê∂';
                case 'TRX': return 'üîó';
                default: return 'üí≤';
            }
        };

        // --- D√ÅTA ---
        
        // Predvolen√© hodnoty (pre fallback, ak sa API nenaƒç√≠ta)
        let cryptoData = [
            { id: "bitcoin", symbol: "BTC", name: "Bitcoin", price: 60000.00, change: 0, cap: "Loading", icon: getIcon('BTC') },
            { id: "ethereum", symbol: "ETH", name: "Ethereum", price: 3000.00, change: 0, cap: "Loading", icon: getIcon('ETH') },
            { id: "binancecoin", symbol: "BNB", name: "BNB", price: 500.00, change: 0, cap: "Loading", icon: getIcon('BNB') },
            { id: "solana", symbol: "SOL", name: "Solana", price: 100.00, change: 0, cap: "Loading", icon: getIcon('SOL') },
            { id: "ripple", symbol: "XRP", name: "XRP", price: 0.50, change: 0, cap: "Loading", icon: getIcon('XRP') },
        ];

        // Kurzy mien (roz≈°√≠ren√© o 3 p√°ry)
        let forexData = [
            { pair: "EUR/USD", rate: 1.0, change: 0, icon: 'üá™üá∫/üá∫üá∏' },
            { pair: "USD/JPY", rate: 150.0, change: 0, icon: 'üá∫üá∏/üáØüáµ' },
            { pair: "GBP/USD", rate: 1.2, change: 0, icon: 'üá¨üáß/üá∫üá∏' },
            { pair: "USD/CAD", rate: 1.35, change: 0, icon: 'üá∫üá∏/üá®üá¶' }, 
            { pair: "USD/CHF", rate: 0.90, change: 0, icon: 'üá∫üá∏/üá®üá≠' }, 
            { pair: "AUD/USD", rate: 0.65, change: 0, icon: 'üá¶üá∫/üá∫üá∏' }, 
        ];

        // --- Core Logika UI ---
        let currentMainView = 'home';
        let currentTabView = 'dashboard';
        let btcChartInstance = null;

        function navigate(viewId) {
            currentMainView = viewId;
            const mainContent = document.getElementById('main-content');
            const aboutContent = document.getElementById('about');
            
            if (viewId === 'home') {
                aboutContent.classList.add('hidden');
                mainContent.classList.remove('hidden');
                showView(currentTabView); 
            } else {
                mainContent.classList.add('hidden');
                aboutContent.classList.remove('hidden');
            }
        }

        function showView(viewId) {
            currentTabView = viewId;
            const views = document.querySelectorAll('.view-content');
            views.forEach(view => view.classList.add('hidden'));
            document.getElementById(viewId).classList.remove('hidden');

            const buttons = document.querySelectorAll('#main-tabs .tab-button');
            buttons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-view') === viewId) btn.classList.add('active');
            });
            
            // Okam≈æit√© prekreslenie pri prepnut√≠
            renderAll();
        }

        function formatMoney(amount, decimals = 2) {
            if (amount === undefined || amount === null) return '---';
            return amount.toLocaleString('en-US', { minimumFractionDigits: decimals, maximumFractionDigits: decimals });
        }
        
        function getChangeColorClass(change) {
            return change >= 0 ? 'text-up-green' : 'text-down-red';
        }

        // --- API FETCHING LOGIKA (REAL DATA) ---

        async function fetchRealData() {
            // Uk√°≈æ loader
            document.getElementById('loading-spinner').classList.remove('opacity-0');
            document.getElementById('live-indicator').classList.remove('hidden');
            document.getElementById('live-indicator').classList.add('flex');
            document.getElementById('crypto-status').innerText = 'Naƒç√≠tavam d√°ta...';
            document.getElementById('forex-status').innerText = 'Naƒç√≠tavam d√°ta...';

            let apiSuccess = false;

            try {
                // 1. Fetch Crypto (CoinGecko)
                const cryptoIds = cryptoData.map(c => c.id).join(',');

                // 4s timeout pre mobiln√© siete
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 4000); 

                const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${cryptoIds}&vs_currencies=usd&include_24hr_change=true`, {
                    signal: controller.signal
                });
                clearTimeout(timeoutId);

                if (!response.ok) throw new Error('CoinGecko Error');
                const data = await response.json();
                
                // Update Crypto
                let btcPriceUpdated = false;
                cryptoData.forEach(coin => {
                    if (data[coin.id]) {
                        coin.price = data[coin.id].usd;
                        coin.change = data[coin.id].usd_24h_change;
                        coin.cap = "Live"; 
                        if (coin.symbol === 'BTC') btcPriceUpdated = true;
                    } else {
                        // Ak CoinGecko neodpovie, nastav na N/A
                        coin.price = null; 
                        coin.change = null;
                        coin.cap = "N/A";
                    }
                });
                if (btcPriceUpdated) {
                    apiSuccess = true;
                } else {
                    document.getElementById('crypto-status').innerText = 'Chyba: D√°ta kryptomien nedostupn√©.';
                }

                // 2. Fetch Forex (ExchangeRate-API)
                const controllerFx = new AbortController();
                const timeoutFx = setTimeout(() => controllerFx.abort(), 4000);
                
                // Fetch USD rates
                const forexRes = await fetch('https://api.exchangerate-api.com/v4/latest/USD', {
                    signal: controllerFx.signal
                });
                clearTimeout(timeoutFx);

                if (!forexRes.ok) throw new Error('Forex API Error');
                const fxData = await forexRes.json();
                
                const rates = fxData.rates;

                // Aktualiz√°cia kurzov:
                forexData[0].rate = 1 / rates.EUR; // EUR/USD = 1 / (USD/EUR)
                forexData[1].rate = rates.JPY;     // USD/JPY
                forexData[2].rate = 1 / rates.GBP; // GBP/USD = 1 / (USD/GBP)
                forexData[3].rate = rates.CAD;     // USD/CAD
                forexData[4].rate = rates.CHF;     // USD/CHF
                forexData[5].rate = 1 / rates.AUD; // AUD/USD = 1 / (USD/AUD)

                document.getElementById('forex-status').innerText = ''; // Vyma≈æ status po √∫spechu

            } catch (error) {
                console.warn("API nedostupn√© (Mobile/Network). Zost√°vam na default hodnot√°ch:", error);
                document.getElementById('live-indicator').classList.remove('flex');
                document.getElementById('live-indicator').classList.add('hidden');
                document.getElementById('crypto-status').innerText = 'Chyba pripojenia: Skontrolujte internet.';
                document.getElementById('forex-status').innerText = 'Chyba pripojenia: Skontrolujte internet.';
            }

            // Render
            renderAll();
            updateDashboardValues();
            if(apiSuccess) {
                 updateChart();
            }
            
            // Skry loader
            setTimeout(() => {
                document.getElementById('loading-spinner').classList.add('opacity-0');
            }, 500);
        }

        // --- RENDER FUNCTIONS ---

        function renderCrypto() {
            const tbody = document.getElementById('crypto-list');
            tbody.innerHTML = '';
            // Naƒç√≠tam ƒças≈• d√°t z poƒæa, aby bola tabuƒæka men≈°ia
            const limitedCryptoData = cryptoData.slice(0, 5); 

            limitedCryptoData.forEach((coin, index) => {
                const priceText = coin.price ? `$${formatMoney(coin.price, coin.price < 1 ? 5 : 2)}` : 'N/A';
                const changeText = coin.change !== null ? `${coin.change > 0 ? '+' : ''}${coin.change.toFixed(2)}%` : 'N/A';
                const changeClass = coin.change !== null ? getChangeColorClass(coin.change) : 'text-slate-400';

                const tr = document.createElement('tr');
                tr.className = 'data-row border-b border-card-hover last:border-0';
                tr.innerHTML = `
                    <td class="py-3 px-4 text-slate-400 font-mono text-sm">${index + 1}</td>
                    <td class="py-3 px-4 flex items-center">
                        <span class="mr-2 text-xl">${coin.icon}</span>
                        <div>
                            <span class="block text-white font-bold">${coin.name}</span>
                            <span class="text-xs text-slate-500">${coin.symbol}</span>
                        </div>
                    </td>
                    <td class="py-3 px-4 font-mono text-white">${priceText}</td>
                    <td class="py-3 px-4 font-bold ${changeClass}">
                        ${changeText}
                    </td>
                    <td class="py-3 px-4 hidden sm:table-cell text-slate-400 text-sm">${coin.cap}</td>
                `;
                tbody.appendChild(tr);
            });
            if (limitedCryptoData.length === 0) {
                 document.getElementById('crypto-status').innerText = 'Chyba: D√°ta kryptomien nedostupn√©.';
            }
        }

        function renderForex() {
            const container = document.getElementById('forex-list');
            container.innerHTML = '';
            forexData.forEach(pair => {
                const div = document.createElement('div');
                div.className = 'bg-card-hover/50 p-4 rounded-xl border border-card-hover flex justify-between items-center transition hover:bg-card-hover';
                div.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-2xl mr-3">${pair.icon}</span>
                        <span class="font-bold text-white">${pair.pair}</span>
                    </div>
                    <div class="text-right">
                        <p class="font-mono text-white text-lg">${pair.rate.toFixed(4)}</p>
                        <p class="text-xs font-bold text-slate-400">Live Rate</p>
                    </div>
                `;
                container.appendChild(div);
            });
        }
        
        function renderAll() {
            if (currentTabView === 'crypto') renderCrypto();
            if (currentTabView === 'forex') renderForex();
        }

        function updateDashboardValues() {
            const btc = cryptoData.find(c => c.symbol === 'BTC');
            const eth = cryptoData.find(c => c.symbol === 'ETH');
            const eurusd = forexData.find(f => f.pair === 'EUR/USD');

            // Bitcoin
            if (btc && btc.price > 0) {
                document.getElementById('dash-btc-price').innerText = `$${formatMoney(btc.price)}`;
                document.getElementById('dash-btc-change').innerHTML = `<span class="${getChangeColorClass(btc.change)}">${btc.change.toFixed(2)}%</span> (24h)`;
            } else {
                 document.getElementById('dash-btc-price').innerText = `N/A`;
                 document.getElementById('dash-btc-change').innerHTML = ``;
            }
            
            // Ethereum
            if (eth && eth.price > 0) {
                document.getElementById('dash-eth-price').innerText = `$${formatMoney(eth.price)}`;
                document.getElementById('dash-eth-change').innerHTML = `<span class="${getChangeColorClass(eth.change)}">${eth.change.toFixed(2)}%</span> (24h)`;
            } else {
                 document.getElementById('dash-eth-price').innerText = `N/A`;
                 document.getElementById('dash-eth-change').innerHTML = ``;
            }

            // EUR/USD
            if (eurusd && eurusd.rate > 0) {
                document.getElementById('dash-eurusd-price').innerText = eurusd.rate.toFixed(4);
            } else {
                 document.getElementById('dash-eurusd-price').innerText = `N/A`;
            }
        }

        // --- GRAF (Pou≈æ√≠va re√°lnu BTC cenu) ---
        function initChart() {
            const ctx = document.getElementById('btcChart').getContext('2d');
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, 'rgba(59, 130, 246, 0.5)'); 
            gradient.addColorStop(1, 'rgba(59, 130, 246, 0)'); 
            
            const data = {
                labels: ['60s', '50s', '40s', '30s', '20s', '10s', 'Now'],
                datasets: [{
                    label: 'BTC Cena (USD)',
                    data: [], // Zaƒç√≠name s pr√°zdnymi d√°tami, aby sa naƒç√≠tal prv√Ω live bod
                    borderColor: '#3b82f6',
                    backgroundColor: gradient,
                    tension: 0.4,
                    fill: true,
                }]
            };

            btcChartInstance = new Chart(ctx, {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { display: false }, ticks: { color: '#64748b' } },
                        y: { grid: { color: '#334155' }, ticks: { color: '#64748b' } }
                    }
                }
            });
        }

        function updateChart() {
            if (!btcChartInstance) return;
            const btc = cryptoData.find(c => c.symbol === 'BTC');
            if (btc && btc.price > 0) {
                // Posun d√°t: odstr√°≈à najstar≈°√≠, pridaj najnov≈°√≠
                if (btcChartInstance.data.datasets[0].data.length >= 7) {
                    btcChartInstance.data.datasets[0].data.shift();
                }
                btcChartInstance.data.datasets[0].data.push(btc.price);
                btcChartInstance.update();
            }
        }
        
        // --- INIT ---
        window.onload = function() {
            initChart();
            lucide.createIcons();
            
            // Prv√© naƒç√≠tanie
            fetchRealData();

            // Interval aktualiz√°cie: 10 sek√∫nd (ZMENEN√â NA 10 000 MS)
            setInterval(fetchRealData, 10000);
        };

    </script>
</body>
</html>
