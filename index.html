<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kurzy-check: Pr√©miov√Ω Investiƒçn√Ω Dashboard</title>
    <!-- Naƒç√≠tanie Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Naƒç√≠tanie Chart.js pre vizualiz√°ciu -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Naƒç√≠tanie Lucide Icons pre modern√© ikony (SVG) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        // Konfigur√°cia Tailwind CSS pre modern√Ω tmav√Ω dizajn
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-main': '#0f172a', // Slate-900
                        'card-bg': '#1e293b', // Slate-800 - Hlavn√© pozadie kariet
                        'card-hover': '#334155', // Slate-700 - Hover efekt
                        'accent-primary': '#3b82f6', // Blue-500 - Pre navig√°ciu/hlavn√Ω fokus
                        'up-green': '#10b981', // Emerald-500 - Zelen√° pre rast
                        'down-red': '#ef4444', // Red-500 - ƒåerven√° pre pokles
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- Vlastn√Ω CSS pre prvky, ktor√© nem√¥≈æe pokry≈• Tailwind -->
    <style>
        /* Z√°kladn√Ω ≈°t√Ωl pre body a font */
        body {
            background-color: #0f172a;
            color: #e2e8f0; /* Svetlej≈°√≠ text pre tmav√© pozadie */
            font-family: 'Inter', sans-serif;
        }

        /* Vylep≈°en√Ω ≈°t√Ωl pre z√°lo≈æky (navig√°cia) */
        .tab-button {
            display: inline-block;
            padding: 0.75rem 1.25rem;
            font-weight: 500;
            font-size: 0.875rem;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            color: #94a3b8; /* text-slate-400 */
            white-space: nowrap;
            cursor: pointer;
        }
        .tab-button:hover {
            color: #f1f5f9; /* text-slate-100 */
        }
        .tab-button.active {
            color: #3b82f6; /* accent-primary */
            border-color: #3b82f6; /* accent-primary */
        }
        
        /* ≈†t√Ωl pre tabuƒæky a riadky */
        .data-row {
            transition: background-color 0.15s;
            cursor: pointer;
        }
        .data-row:hover {
            background-color: rgba(51, 65, 85, 0.5); /* card-hover/50 */
        }

        /* Anim√°cia pre zmenu ceny */
        @keyframes flashGreen {
            0% { color: #10b981; }
            100% { color: inherit; }
        }
        @keyframes flashRed {
            0% { color: #ef4444; }
            100% { color: inherit; }
        }
        .flash-up { animation: flashGreen 1s ease-out; }
        .flash-down { animation: flashRed 1s ease-out; }

        /* Kontajner pre tabulku s gradientom pre lep≈°iu viditeƒænos≈• scrollu na mobile */
        .table-container {
            position: relative;
        }
        /* Gradient naƒæavo */
        .table-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 20px;
            pointer-events: none;
            background: linear-gradient(to right, #1e293b 0%, rgba(30, 41, 59, 0) 100%);
        }
        /* Gradient napravo */
        .table-container::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            height: 100%;
            width: 20px;
            pointer-events: none;
            background: linear-gradient(to left, #1e293b 0%, rgba(30, 41, 59, 0) 100%);
        }

        /* Naƒç√≠tavac√≠ indik√°tor */
        .loader {
            border: 3px solid #1e293b;
            border-radius: 50%;
            border-top: 3px solid #3b82f6;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

    </style>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <!-- Hlavn√Ω kontajner aplik√°cie -->
    <div id="app" class="max-w-7xl mx-auto">
        
        <!-- TOP NAVIG√ÅCIA (Domov / O n√°s) -->
        <header class="flex justify-between items-center mb-6 border-b border-card-hover pb-4">
            <h1 class="text-3xl font-extrabold text-accent-primary tracking-tight flex items-center">
                Kurzy-check
                <span id="live-indicator" class="ml-3 text-xs font-mono bg-card-hover text-up-green px-2 py-1 rounded hidden items-center">
                    <span class="w-2 h-2 bg-up-green rounded-full mr-2 animate-pulse"></span> LIVE
                </span>
            </h1>
            <nav>
                <button onclick="navigate('home')" id="nav-home" class="px-3 py-1 text-sm font-semibold rounded-lg transition duration-200 bg-accent-primary text-white shadow-lg shadow-accent-primary/30 mr-2">
                    Domov
                </button>
                <button onclick="navigate('about')" id="nav-about" class="px-3 py-1 text-sm font-semibold rounded-lg transition duration-200 text-slate-300 hover:bg-card-hover">
                    O n√°s
                </button>
            </nav>
        </header>

        <!-- Obsah (VIEWS) - Zobrazen√Ω len pri 'Domov' -->
        <div id="main-content">
            <!-- Sekcia pre z√°lo≈æky (Krypto, Akcie, Komodity, atƒè.) -->
            <nav class="mb-8 overflow-x-auto">
                <div class="flex border-b border-card-hover" id="main-tabs">
                    <button onclick="showView('dashboard')" class="tab-button active" data-view="dashboard">Dashboard</button>
                    <button onclick="showView('crypto')" class="tab-button" data-view="crypto">Kryptomeny</button>
                    <button onclick="showView('stocks')" class="tab-button" data-view="stocks">Akcie</button>
                    <button onclick="showView('commodities')" class="tab-button" data-view="commodities">Komodity</button>
                    <button onclick="showView('metals')" class="tab-button" data-view="metals">Drah√© Kovy</button>
                    <button onclick="showView('bonds')" class="tab-button" data-view="bonds">Dlhopisy</button>
                    <button onclick="showView('forex')" class="tab-button" data-view="forex">Kurzy Mien (Forex)</button>
                    <button onclick="showView('calculator')" class="tab-button" data-view="calculator">Investiƒçn√° Kalkulaƒçka</button>
                </div>
            </nav>

            <div id="views">
                <!-- 1. DASHBOARD VIEW -->
                <div id="dashboard" class="view-content">
                    <h2 class="text-3xl font-bold mb-6 text-slate-100 flex items-center">
                        Aktu√°lne Trhov√© S√∫hrny
                        <span id="loading-spinner" class="loader ml-4 opacity-0"></span>
                    </h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <!-- Karta 1: Bitcoin (Live) -->
                        <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover transition duration-300 hover:scale-[1.02]">
                            <p class="text-sm text-slate-400">Bitcoin (Live)</p>
                            <p class="text-3xl font-bold mt-2 text-white" id="dash-btc-price">Naƒç√≠tavam...</p>
                            <span class="text-slate-400 text-sm flex items-center mt-3 font-semibold" id="dash-btc-change">
                                --% (24h)
                            </span>
                        </div>
                        <!-- Karta 2: Ethereum (Live) -->
                        <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover transition duration-300 hover:scale-[1.02]">
                            <p class="text-sm text-slate-400">Ethereum (Live)</p>
                            <p class="text-3xl font-bold mt-2 text-white" id="dash-eth-price">Naƒç√≠tavam...</p>
                            <span class="text-slate-400 text-sm flex items-center mt-3 font-semibold" id="dash-eth-change">
                                --% (24h)
                            </span>
                        </div>
                        <!-- Karta 3: Zlato (Live Proxy) -->
                        <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover transition duration-300 hover:scale-[1.02]">
                            <p class="text-sm text-slate-400">Zlato (XAU/USD)</p>
                            <p class="text-3xl font-bold mt-2 text-white" id="dash-gold-price">Naƒç√≠tavam...</p>
                            <span class="text-slate-400 text-sm flex items-center mt-3 font-semibold" id="dash-gold-change">
                                --% (24h)
                            </span>
                        </div>
                        <!-- Karta 4: S&P 500 Index -->
                        <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover transition duration-300 hover:scale-[1.02]">
                            <p class="text-sm text-slate-400">S&P 500 Index (Sim)</p>
                            <p class="text-3xl font-bold mt-2 text-white" id="dash-sp500-price">5,123.45</p>
                            <span class="text-up-green text-sm flex items-center mt-3 font-semibold" id="dash-sp500-change">
                                +1.01% (Dnes)
                                <i data-lucide="trending-up" class="w-4 h-4 ml-1"></i>
                            </span>
                        </div>
                    </div>

                    <!-- Graf -->
                    <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover">
                        <h3 class="text-xl font-semibold mb-4 text-slate-200">V√Ωvoj BTC Ceny (Live Data)</h3>
                        <div class="h-80">
                            <canvas id="btcChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- 2. KRYPTOMENY VIEW -->
                <div id="crypto" class="view-content hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-200">Top Kryptomeny (Live z CoinGecko)</h2>
                    <div class="bg-card-bg p-4 rounded-2xl shadow-xl border border-card-hover table-container overflow-x-auto">
                        <table class="min-w-full divide-y divide-card-hover">
                            <thead>
                                <tr class="text-left text-slate-400">
                                    <th class="py-3 px-4 font-semibold">#</th>
                                    <th class="py-3 px-4 font-semibold">Mena</th>
                                    <th class="py-3 px-4 font-semibold">Cena (USD)</th>
                                    <th class="py-3 px-4 font-semibold">24h Zmena</th>
                                    <th class="py-3 px-4 font-semibold hidden sm:table-cell">Kapitaliz√°cia</th>
                                </tr>
                            </thead>
                            <tbody id="crypto-list" class="divide-y divide-card-hover">
                                <!-- D√°ta sa vlo≈æia cez JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 3. AKCIE VIEW -->
                <div id="stocks" class="view-content hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-200">Sledovan√© Akcie (Simul√°cia*)</h2>
                    <p class="text-xs text-slate-500 mb-2">*Live d√°ta pre akcie vy≈æaduj√∫ platen√Ω kƒæ√∫ƒç. Zobrazujeme realistick√∫ simul√°ciu.</p>
                    <div class="bg-card-bg p-4 rounded-2xl shadow-xl border border-card-hover table-container overflow-x-auto">
                        <table class="min-w-full divide-y divide-card-hover">
                            <thead>
                                <tr class="text-left text-slate-400">
                                    <th class="py-3 px-4 font-semibold">Ikona</th>
                                    <th class="py-3 px-4 font-semibold">Spoloƒçnos≈•</th>
                                    <th class="py-3 px-4 font-semibold">Cena (USD)</th>
                                    <th class="py-3 px-4 font-semibold">Dnes</th>
                                </tr>
                            </thead>
                            <tbody id="stock-list" class="divide-y divide-card-hover">
                                <!-- D√°ta sa vlo≈æia cez JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 4. KOMODITY VIEW -->
                <div id="commodities" class="view-content hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-200">Hlavn√© Komodity (Simul√°cia)</h2>
                    <div class="bg-card-bg p-4 rounded-2xl shadow-xl border border-card-hover table-container overflow-x-auto">
                        <table class="min-w-full divide-y divide-card-hover">
                            <thead>
                                <tr class="text-left text-slate-400">
                                    <th class="py-3 px-4 font-semibold">Ikona</th>
                                    <th class="py-3 px-4 font-semibold">Komodita</th>
                                    <th class="py-3 px-4 font-semibold">Cena (USD/Jednotka)</th>
                                    <th class="py-3 px-4 font-semibold">Dnes</th>
                                </tr>
                            </thead>
                            <tbody id="commodity-list" class="divide-y divide-card-hover">
                                <!-- D√°ta sa vlo≈æia cez JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 5. DRAH√â KOVY VIEW -->
                <div id="metals" class="view-content hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-200">Drah√© Kovy (Live Token Proxy)</h2>
                    <p class="text-xs text-slate-500 mb-2">Ceny odvoden√© z tokenizovan√Ωch akt√≠v (PAXG, KAG) pre live d√°ta.</p>
                    <div class="bg-card-bg p-4 rounded-2xl shadow-xl border border-card-hover">
                        <div id="metals-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <!-- D√°ta sa vlo≈æia cez JS -->
                        </div>
                    </div>
                </div>

                <!-- 6. DLHOPISY VIEW -->
                <div id="bonds" class="view-content hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-200">Vybran√© Dlhopisy (Simul√°cia)</h2>
                    <div class="bg-card-bg p-4 rounded-2xl shadow-xl border border-card-hover table-container overflow-x-auto">
                        <table class="min-w-full divide-y divide-card-hover">
                            <thead>
                                <tr class="text-left text-slate-400">
                                    <th class="py-3 px-4 font-semibold">Oznaƒçenie</th>
                                    <th class="py-3 px-4 font-semibold">N√°zov</th>
                                    <th class="py-3 px-4 font-semibold">V√Ωnos (%)</th>
                                    <th class="py-3 px-4 font-semibold hidden sm:table-cell">Maturita</th>
                                </tr>
                            </thead>
                            <tbody id="bond-list" class="divide-y divide-card-hover">
                                <!-- D√°ta sa vlo≈æia cez JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 7. MENY VIEW (Forex) -->
                <div id="forex" class="view-content hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-200">Kurzy Mien (Live z API)</h2>
                    <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="forex-list">
                            <!-- D√°ta sa vlo≈æia cez JS -->
                        </div>
                    </div>
                </div>
                
                <!-- 8. KALKULAƒåKA VIEW -->
                <div id="calculator" class="view-content hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-200">Historick√° Investiƒçn√° Kalkulaƒçka</h2>
                    <div class="bg-card-bg p-6 rounded-2xl shadow-xl border border-card-hover max-w-lg">
                        <p class="text-slate-400 mb-4">Zistite, ak√∫ hodnotu by mala va≈°a invest√≠cia dnes.</p>
                        
                        <div class="mb-4">
                            <label for="asset" class="block text-sm font-medium mb-1">Vyberte akt√≠vum:</label>
                            <select id="asset" class="w-full p-2 rounded-lg bg-card-hover text-white border border-card-hover focus:ring-accent-primary focus:border-accent-primary">
                                <option value="sp500">S&P 500 Index</option>
                                <option value="btc">Bitcoin (BTC)</option>
                                <option value="gold">Zlato (XAU)</option>
                            </select>
                        </div>

                        <div class="mb-4">
                            <label for="years" class="block text-sm font-medium mb-1">Poƒçet rokov v minulosti (napr. 10):</label>
                            <input type="number" id="years" value="10" min="1" max="50" class="w-full p-2 rounded-lg bg-card-hover text-white border border-card-hover focus:ring-accent-primary focus:border-accent-primary">
                        </div>

                        <div class="mb-6">
                            <label for="investment" class="block text-sm font-medium mb-1">P√¥vodn√° investovan√° suma (USD):</label>
                            <input type="number" id="investment" value="1000" min="1" class="w-full p-2 rounded-lg bg-card-hover text-white border border-card-hover focus:ring-accent-primary focus:border-accent-primary">
                        </div>

                        <button onclick="calculateInvestment()" class="w-full p-3 rounded-xl font-bold bg-accent-primary text-white hover:bg-blue-600 transition duration-200 shadow-md shadow-accent-primary/30">
                            Vypoƒç√≠ta≈• Hodnotu Dnes
                        </button>

                        <div id="calculator-result" class="mt-6 p-4 bg-card-hover rounded-xl border border-card-hover hidden">
                            <h4 class="text-lg font-semibold mb-2 text-accent-primary">V√Ωsledok simul√°cie:</h4>
                            <p id="result-text" class="text-white text-2xl font-bold"></p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        
        <!-- O N√ÅS VIEW -->
        <div id="about" class="hidden">
            <h2 class="text-3xl font-bold mb-6 text-slate-100 border-b border-card-hover pb-2">O n√°s</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mt-8">
                <div class="space-y-6">
                    <div class="p-6 bg-card-bg rounded-2xl shadow-xl border border-card-hover">
                        <h3 class="text-xl font-semibold text-accent-primary mb-3">Ako to funguje?</h3>
                        <p class="text-slate-300">
                            Kryptomeny a meny s√∫ s≈•ahovan√© z <strong>re√°lnych verejn√Ωch API</strong> (CoinGecko, ExchangeRate). 
                            Keƒè≈æe verejn√© d√°ta pre akciov√Ω trh (S&P500, Apple) s√∫ spoplatnen√©, tieto hodnoty s√∫ v tejto verzii simulovan√© na z√°klade trhov√Ωch vzorcov.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Logika -->
    <script>
        // Funkcia na generovanie ikony
        const getIcon = (symbol, type) => {
            switch (symbol) {
                // Crypto
                case 'BTC': return '‚Çø';
                case 'ETH': return 'Œû';
                case 'XRP': return '‚úñÔ∏è';
                case 'SOL': return 'üîÜ';
                case 'ADA': return '‚Ç≥';
                case 'DOGE': return 'üêï';
                case 'BNB': return 'üî∏';
                case 'LTC': return '‚õèÔ∏è';
                case 'SHIB': return 'üê∂';
                case 'TRX': return 'üîó';
                // Akcie
                case 'NVDA': return 'N';
                case 'AMD': return 'A';
                case 'AAPL': return 'Ô£ø';
                case 'META': return '‚ìÇÔ∏è';
                case 'MCD': return 'üçî';
                case 'MA': return 'üí≥';
                case 'NKE': return 'üëü';
                case 'PAG': return 'P';
                case 'HP': return 'H';
                case 'S&P500': return 'üìà';
                // Komodity/Kovy
                case 'XAU': return 'ü•á'; 
                case 'XAG': return 'ü•à'; 
                case 'BRENT': return 'üõ¢Ô∏è'; 
                case 'PL': return 'üí†'; 
                case 'PA': return '‚ö™'; 
                case 'CC': return 'üç´'; 
                case 'SUGAR': return 'üç¨'; 
                case 'NI': return 'üß™'; 
                case 'PB': return 'üß±'; 
                case 'ZN': return 'üî©'; 
                // Dlhopisy
                case 'US10Y': return 'üèõÔ∏è'; 
                case 'DE10Y': return 'üá©üá™';
                case 'SKGOV': return 'üá∏üá∞';
                case 'JP10Y': return 'üáØüáµ';

                default: return type === 'stock' ? 'üè¢' : 'üí≤';
            }
        };

        // --- D√ÅTA ---
        
        // 1. Krypto (Mapovanie ID pre CoinGecko)
        let cryptoData = [
            { id: "bitcoin", symbol: "BTC", name: "Bitcoin", price: 0, change: 0, cap: "Loading", icon: getIcon('BTC') },
            { id: "ethereum", symbol: "ETH", name: "Ethereum", price: 0, change: 0, cap: "Loading", icon: getIcon('ETH') },
            { id: "binancecoin", symbol: "BNB", name: "BNB", price: 0, change: 0, cap: "Loading", icon: getIcon('BNB') },
            { id: "solana", symbol: "SOL", name: "Solana", price: 0, change: 0, cap: "Loading", icon: getIcon('SOL') },
            { id: "ripple", symbol: "XRP", name: "XRP", price: 0, change: 0, cap: "Loading", icon: getIcon('XRP') },
            { id: "dogecoin", symbol: "DOGE", name: "Dogecoin", price: 0, change: 0, cap: "Loading", icon: getIcon('DOGE') },
            { id: "cardano", symbol: "ADA", name: "Cardano", price: 0, change: 0, cap: "Loading", icon: getIcon('ADA') },
            { id: "shiba-inu", symbol: "SHIB", name: "Shiba Inu", price: 0, change: 0, cap: "Loading", icon: getIcon('SHIB') },
        ];

        // 2. Kovy (Mapovanie ID pre CoinGecko - Proxy tokeny)
        let metalData = [
            { id: "pax-gold", symbol: "XAU", name: "Zlato (PAXG)", price: 0, change: 0, icon: getIcon('XAU') },
            { id: "kinesis-silver", symbol: "XAG", name: "Striebro (KAG)", price: 0, change: 0, icon: getIcon('XAG') },
        ];

        // 3. Forex (Fixn√Ω zoznam, hodnoty sa fetchuj√∫)
        let forexData = [
            { pair: "EUR/USD", rate: 1.08, change: 0, icon: 'üá™üá∫/üá∫üá∏' },
            { pair: "USD/JPY", rate: 155.0, change: 0, icon: 'üá∫üá∏/üáØüáµ' },
            { pair: "GBP/USD", rate: 1.25, change: 0, icon: 'üá¨üáß/üá∫üá∏' },
        ];

        // 4. Akcie (Simulovan√© - Real API je platen√©)
        let mockStocks = [ 
            { symbol: "S&P500", company: "S&P 500 Index", price: 5123.45, change: 1.01, icon: getIcon('S&P500') },
            { symbol: "NVDA", company: "NVIDIA Corp.", price: 955.10, change: 2.15, icon: getIcon('NVDA') },
            { symbol: "AAPL", company: "Apple Inc.", price: 185.30, change: 0.85, icon: getIcon('AAPL') },
            { symbol: "AMD", company: "Advanced Micro Devices", price: 160.20, change: -1.20, icon: getIcon('AMD') },
            { symbol: "META", company: "Meta Platforms", price: 475.00, change: 0.45, icon: getIcon('META') },
            { symbol: "MCD", company: "McDonald's Corp.", price: 275.50, change: 0.22, icon: getIcon('MCD') },
        ];

        let mockCommodities = [
            { name: "Ropa Brent", symbol: "BRENT", price: 85.30, change: -0.45, unit: "Barel", icon: getIcon('BRENT') },
            { name: "Kakao", symbol: "CC", price: 9500.00, change: 2.50, unit: "Tona", icon: getIcon('CC') },
            { name: "Cukor", symbol: "SUGAR", price: 18.50, change: -0.05, unit: "Libra", icon: getIcon('SUGAR') },
        ];

        let mockBonds = [
            { symbol: "US10Y", name: "10-roƒçn√Ω US Treasury", yield: 4.25, change: 0.05, maturity: "2034", icon: getIcon('US10Y') },
            { symbol: "DE10Y", name: "10-roƒçn√Ω Nemeck√Ω Bund", yield: 2.55, change: -0.02, maturity: "2034", icon: getIcon('DE10Y') },
            { symbol: "SKGOV", name: "Slovensk√Ω 5-roƒçn√Ω", yield: 3.80, change: 0.10, maturity: "2029", icon: getIcon('SKGOV') },
        ];

        // --- Core Logika UI ---
        let currentMainView = 'home';
        let currentTabView = 'dashboard';
        let btcChartInstance = null;

        function navigate(viewId) {
            currentMainView = viewId;
            const mainContent = document.getElementById('main-content');
            const aboutContent = document.getElementById('about');
            
            if (viewId === 'home') {
                aboutContent.classList.add('hidden');
                mainContent.classList.remove('hidden');
                showView(currentTabView); 
            } else {
                mainContent.classList.add('hidden');
                aboutContent.classList.remove('hidden');
            }
        }

        function showView(viewId) {
            currentTabView = viewId;
            const views = document.querySelectorAll('.view-content');
            views.forEach(view => view.classList.add('hidden'));
            document.getElementById(viewId).classList.remove('hidden');

            const buttons = document.querySelectorAll('#main-tabs .tab-button');
            buttons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-view') === viewId) btn.classList.add('active');
            });
            
            // Okam≈æit√© prekreslenie pri prepnut√≠
            renderAll();
        }

        function formatMoney(amount, decimals = 2) {
            if (amount === undefined || amount === null) return '---';
            return amount.toLocaleString('en-US', { minimumFractionDigits: decimals, maximumFractionDigits: decimals });
        }
        
        function getChangeColorClass(change) {
            return change >= 0 ? 'text-up-green' : 'text-down-red';
        }

        // --- API FETCHING LOGIKA (REAL DATA) ---

        async function fetchRealData() {
            // Uk√°≈æ loader
            document.getElementById('loading-spinner').classList.remove('opacity-0');
            document.getElementById('live-indicator').classList.remove('hidden');
            document.getElementById('live-indicator').classList.add('flex');

            try {
                // 1. Fetch Crypto & Metals (CoinGecko)
                const cryptoIds = cryptoData.map(c => c.id).join(',');
                const metalIds = metalData.map(m => m.id).join(',');
                const allIds = `${cryptoIds},${metalIds}`;

                // Pozor: CoinGecko Free API m√° limity. Vol√°me raz za 10s.
                const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${allIds}&vs_currencies=usd&include_24hr_change=true`);
                if (!response.ok) throw new Error('CoinGecko Error');
                const data = await response.json();

                // Update Crypto
                cryptoData.forEach(coin => {
                    if (data[coin.id]) {
                        coin.price = data[coin.id].usd;
                        coin.change = data[coin.id].usd_24h_change;
                        coin.cap = "Live"; // CoinGecko simple endpoint ned√°va cap, na to treba in√Ω endpoint
                    }
                });

                // Update Metals
                metalData.forEach(metal => {
                    if (data[metal.id]) {
                        metal.price = data[metal.id].usd;
                        metal.change = data[metal.id].usd_24h_change;
                    }
                });

                // 2. Fetch Forex (ExchangeRate-API)
                // Toto API je zadarmo a stabiln√©
                const forexRes = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
                if (!forexRes.ok) throw new Error('Forex API Error');
                const fxData = await forexRes.json();
                
                // EUR/USD = 1 / USD_in_EUR
                const usdToEur = fxData.rates.EUR;
                const usdToJpy = fxData.rates.JPY;
                const usdToGbp = fxData.rates.GBP;

                // Update na≈°ich p√°rov
                forexData[0].rate = 1 / usdToEur; // EUR/USD
                forexData[1].rate = usdToJpy;     // USD/JPY
                forexData[2].rate = 1 / usdToGbp; // GBP/USD

            } catch (error) {
                console.error("Chyba pri s≈•ahovan√≠ d√°t:", error);
                // Fallback na simul√°ciu ak API zlyh√° (napr. rate limit)
                simulateCryptoFallback();
            }

            // 3. Simul√°cia akci√≠ (Preto≈æe nem√°me free API)
            simulateStocks();

            // Render
            renderAll();
            updateDashboardValues();
            updateChart();
            
            // Skry loader
            setTimeout(() => {
                document.getElementById('loading-spinner').classList.add('opacity-0');
            }, 500);
        }

        function simulateStocks() {
            // Jemn√° fluktu√°cia pre akcie, aby to vyzeralo ≈æivo
            mockStocks.forEach(s => {
                s.price = s.price * (1 + (Math.random() * 0.002 - 0.001));
                s.change += (Math.random() * 0.05 - 0.025);
            });
            mockCommodities.forEach(c => {
                c.price = c.price * (1 + (Math.random() * 0.003 - 0.0015));
            });
            mockBonds.forEach(b => {
                b.yield += (Math.random() * 0.01 - 0.005);
            });
        }

        function simulateCryptoFallback() {
            // Ak zlyh√° internet, h√Ωb cenami n√°hodne
            cryptoData.forEach(c => c.price = c.price * (1 + (Math.random() * 0.01 - 0.005)));
        }

        // --- RENDER FUNCTIONS ---

        function renderCrypto() {
            const tbody = document.getElementById('crypto-list');
            tbody.innerHTML = '';
            cryptoData.forEach((coin, index) => {
                const tr = document.createElement('tr');
                tr.className = 'data-row border-b border-card-hover last:border-0';
                tr.innerHTML = `
                    <td class="py-3 px-4 text-slate-400 font-mono text-sm">${index + 1}</td>
                    <td class="py-3 px-4 flex items-center">
                        <span class="mr-2 text-xl">${coin.icon}</span>
                        <div>
                            <span class="block text-white font-bold">${coin.name}</span>
                            <span class="text-xs text-slate-500">${coin.symbol}</span>
                        </div>
                    </td>
                    <td class="py-3 px-4 font-mono text-white">$${formatMoney(coin.price, coin.price < 1 ? 5 : 2)}</td>
                    <td class="py-3 px-4 font-bold ${getChangeColorClass(coin.change)}">
                        ${coin.change > 0 ? '+' : ''}${coin.change.toFixed(2)}%
                    </td>
                    <td class="py-3 px-4 hidden sm:table-cell text-slate-400 text-sm">${coin.cap}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function renderMetals() {
            const container = document.getElementById('metals-list');
            container.innerHTML = '';
            metalData.forEach(metal => {
                const div = document.createElement('div');
                div.className = 'bg-card-hover/50 p-4 rounded-xl border border-card-hover flex flex-col items-center justify-center text-center transition hover:bg-card-hover';
                div.innerHTML = `
                    <div class="text-4xl mb-2">${metal.icon}</div>
                    <h3 class="text-lg font-bold text-white mb-1">${metal.name}</h3>
                    <p class="text-2xl font-mono text-white mb-1">$${formatMoney(metal.price)}</p>
                    <span class="text-sm font-bold ${getChangeColorClass(metal.change)}">
                        ${metal.change > 0 ? '+' : ''}${metal.change.toFixed(2)}%
                    </span>
                `;
                container.appendChild(div);
            });
        }

        function renderForex() {
            const container = document.getElementById('forex-list');
            container.innerHTML = '';
            forexData.forEach(pair => {
                const div = document.createElement('div');
                div.className = 'bg-card-hover/50 p-4 rounded-xl border border-card-hover flex justify-between items-center transition hover:bg-card-hover';
                div.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-2xl mr-3">${pair.icon}</span>
                        <span class="font-bold text-white">${pair.pair}</span>
                    </div>
                    <div class="text-right">
                        <p class="font-mono text-white text-lg">${pair.rate.toFixed(4)}</p>
                        <!-- Forex API ned√°va daily change, simulujeme farbu -->
                        <p class="text-xs font-bold text-slate-400">Live Rate</p>
                    </div>
                `;
                container.appendChild(div);
            });
        }
        
        // Funkcie pre Stock/Bonds/Commodities ost√°vaj√∫ rovnak√© ako predt√Ωm (len renderuj√∫ mock polia)
        function renderStocks() {
            const tbody = document.getElementById('stock-list');
            tbody.innerHTML = '';
            mockStocks.forEach(stock => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="py-3 px-4 text-2xl">${stock.icon}</td>
                    <td class="py-3 px-4"><span class="block text-white font-bold">${stock.company}</span><span class="text-xs text-slate-500">${stock.symbol}</span></td>
                    <td class="py-3 px-4 font-mono text-white">$${formatMoney(stock.price)}</td>
                    <td class="py-3 px-4 font-bold ${getChangeColorClass(stock.change)}">${stock.change > 0 ? '+' : ''}${stock.change.toFixed(2)}%</td>
                `;
                tbody.appendChild(tr);
            });
        }
        function renderCommodities() {
            const tbody = document.getElementById('commodity-list');
            tbody.innerHTML = '';
            mockCommodities.forEach(com => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="py-3 px-4 text-2xl">${com.icon}</td>
                    <td class="py-3 px-4"><span class="block text-white font-bold">${com.name}</span></td>
                    <td class="py-3 px-4 font-mono text-white">$${formatMoney(com.price)}</td>
                    <td class="py-3 px-4 font-bold ${getChangeColorClass(com.change)}">${com.change > 0 ? '+' : ''}${com.change.toFixed(2)}%</td>
                `;
                tbody.appendChild(tr);
            });
        }
        function renderBonds() {
            const tbody = document.getElementById('bond-list');
            tbody.innerHTML = '';
            mockBonds.forEach(bond => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="py-3 px-4 flex items-center"><span class="mr-2 text-xl">${bond.icon}</span><span class="font-bold text-white">${bond.symbol}</span></td>
                    <td class="py-3 px-4 text-slate-300 text-sm">${bond.name}</td>
                    <td class="py-3 px-4 font-mono font-bold ${getChangeColorClass(bond.change)}">${bond.yield.toFixed(3)}%</td>
                    <td class="py-3 px-4 hidden sm:table-cell text-slate-400 text-sm">${bond.maturity}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function renderAll() {
            if (currentTabView === 'crypto') renderCrypto();
            if (currentTabView === 'metals') renderMetals();
            if (currentTabView === 'forex') renderForex();
            if (currentTabView === 'stocks') renderStocks();
            if (currentTabView === 'commodities') renderCommodities();
            if (currentTabView === 'bonds') renderBonds();
        }

        function updateDashboardValues() {
            const btc = cryptoData.find(c => c.symbol === 'BTC');
            const eth = cryptoData.find(c => c.symbol === 'ETH');
            const gold = metalData.find(m => m.symbol === 'XAU');
            const sp500 = mockStocks.find(s => s.symbol === 'S&P500');

            if (btc && btc.price > 0) {
                document.getElementById('dash-btc-price').innerText = `$${formatMoney(btc.price)}`;
                document.getElementById('dash-btc-change').innerHTML = `<span class="${getChangeColorClass(btc.change)}">${btc.change.toFixed(2)}%</span> (24h)`;
            }
            if (eth && eth.price > 0) {
                document.getElementById('dash-eth-price').innerText = `$${formatMoney(eth.price)}`;
                document.getElementById('dash-eth-change').innerHTML = `<span class="${getChangeColorClass(eth.change)}">${eth.change.toFixed(2)}%</span> (24h)`;
            }
            if (gold && gold.price > 0) {
                document.getElementById('dash-gold-price').innerText = `$${formatMoney(gold.price)}`;
                document.getElementById('dash-gold-change').innerHTML = `<span class="${getChangeColorClass(gold.change)}">${gold.change.toFixed(2)}%</span> (24h)`;
            }
             if(sp500) {
                document.getElementById('dash-sp500-price').innerText = formatMoney(sp500.price);
                const el = document.getElementById('dash-sp500-change');
                el.className = `text-sm flex items-center mt-3 font-semibold ${getChangeColorClass(sp500.change)}`;
                el.innerHTML = `${sp500.change > 0 ? '+' : ''}${sp500.change.toFixed(2)}% <i data-lucide="trending-up" class="w-4 h-4 ml-1"></i>`;
            }
        }

        // --- GRAF (Zost√°va simulovan√Ω pre plynulos≈•, ale berie live cenu ako base) ---
        function initChart() {
            const ctx = document.getElementById('btcChart').getContext('2d');
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, 'rgba(59, 130, 246, 0.5)'); 
            gradient.addColorStop(1, 'rgba(59, 130, 246, 0)'); 
            
            const data = {
                labels: ['60s', '50s', '40s', '30s', '20s', '10s', 'Now'],
                datasets: [{
                    label: 'BTC Cena (USD)',
                    data: [64000, 64100, 64200, 64150, 64300, 64250, 64400], // Start data
                    borderColor: '#3b82f6',
                    backgroundColor: gradient,
                    tension: 0.4,
                    fill: true,
                }]
            };

            btcChartInstance = new Chart(ctx, {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { display: false }, ticks: { color: '#64748b' } },
                        y: { grid: { color: '#334155' }, ticks: { color: '#64748b' } }
                    }
                }
            });
        }

        function updateChart() {
            if (!btcChartInstance) return;
            const btc = cryptoData.find(c => c.symbol === 'BTC');
            if (btc && btc.price > 0) {
                btcChartInstance.data.datasets[0].data.shift();
                btcChartInstance.data.datasets[0].data.push(btc.price);
                btcChartInstance.update();
            }
        }
        
        function calculateInvestment() {
            const years = parseFloat(document.getElementById('years').value);
            const investment = parseFloat(document.getElementById('investment').value);
            const futureValue = investment * Math.pow((1 + 0.08), years);
            document.getElementById('calculator-result').classList.remove('hidden');
            document.getElementById('result-text').innerText = `$${formatMoney(futureValue)}`;
        }

        // --- INIT ---
        window.onload = function() {
            initChart();
            lucide.createIcons();
            
            // Prv√© naƒç√≠tanie
            fetchRealData();

            // Interval aktualiz√°cie: 6 sek√∫nd (Kompromis medzi "live" a API limitmi)
            setInterval(fetchRealData, 6000);
        };

    </script>
</body>
</html>
